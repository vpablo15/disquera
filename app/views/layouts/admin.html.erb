<%= render template: "layouts/application" %>

<div class="d-flex flex-column vh-100 bg-light">

  <nav class="navbar navbar-expand-lg navbar-dark bg-secondary shadow-lg
  sticky-top p-3">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold fs-3" href="#">
        <i class="fas fa-hammer me-2"></i> Portal de administración
      </a>

      <div class="d-flex align-items-center">
        <% if user_signed_in? %>
          <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle fw-bold" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fas fa-user-circle me-1"></i> <%= current_user.email.split('@').first %>
            </button>
            <ul class="dropdown-menu dropdown-menu-end shadow border-0">
              <li>
                <%= link_to edit_admin_user_path(current_user), class: "dropdown-item" do %>
                  <i class="fas fa-cog me-2"></i> Editar Perfil
                <% end %>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <%= link_to "Cerrar Sesión",
                  destroy_user_session_path,
                  data: { turbo_method: :delete, turbo_confirm: "¿Cerrar sesión?" },
                  class: "dropdown-item text-danger" %>
              </li>
            </ul>
          </div>
        <% else %>
          <%= link_to "Iniciar Sesión", new_user_session_path, class: "btn btn-outline-light btn-sm me-2" %>
          <%= link_to "Registrarse", new_user_registration_path, class: "btn btn-success btn-sm" %>
        <% end %>
      </div>
    </div>
  </nav>

  <div class="d-flex flex-grow-1 overflow-hidden">

    <div class="d-flex flex-column flex-shrink-0 p-3 text-white bg-dark
    shadow-lg" style="width: 250px;">

      <h1 class="text-white small px-3 mt-2 mb-3 fw-bold border-bottom
      pb-2">
        <i class="fas fa-desktop me-"></i> Gestión
      </h1>

      <ul class="nav nav-pills flex-column mb-auto">

        <li>
          <%= link_to admin_users_path, class: "nav-link text-white rounded-3 mb-1" do %>
            <i class="fas fa-users me-2"></i> Usuarios
          <% end %>
        </li>

        <li>
          <%= link_to sales_path, class: "nav-link text-white rounded-3 mb-1" do %>
            <i class="fas fa-chart-line me-2"></i> Ventas
          <% end %>
        </li>

        <li>
          <a href="#productos-collapse" class="nav-link text-white rounded-3 mb-1 collapsed" data-bs-toggle="collapse" aria-expanded="false">
            <i class="fas fa-box-open me-2"></i> Productos
          </a>
          <div class="collapse" id="productos-collapse">
            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 ps-3">
              <li>
                <%= link_to admin_albums_path, class: "nav-link text-white rounded-3 small py-1" do %>
                  <i class="fas fa-boxes me-2"></i> Álbumes
                <% end %>
              </li>
              <li>
                <%= link_to admin_authors_path, class: "nav-link text-white rounded-3 small py-1" do %>
                  <i class="fas fa-user-tag me-2"></i> Autores
                <% end %>
              </li>
              <li>
                <%= link_to admin_genres_path, class: "nav-link text-white rounded-3 small py-1" do %>
                  <i class="fas fa-tags me-2"></i> Géneros
                <% end %>
              </li>
            </ul>
          </div>
        </li>

        <li><hr></li> </ul>

      <hr>
      <small class="text-muted text-center">Admin Pro v2.0</small>

    </div>


    <main class="flex-grow-1 p-4 overflow-auto">
      <%# if notice %>
<!--        <div class="alert alert-success alert-dismissible fade show" role="alert">-->
          <%#= notice %>
<!--          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>-->
<!--        </div>-->
      <%# end %>
      <%# if alert %>
<!--        <div class="alert alert-danger alert-dismissible fade show" role="alert">-->
          <%#= alert %>
<!--          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>-->
<!--        </div>-->
      <%# end %>

      <%= yield :admin_content %>

    </main>

  </div>
</div>