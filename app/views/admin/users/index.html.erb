
<% content_for :admin_content do %>
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="mb-0 text-dark">
    <i class="fas fa-users me-2"></i> Listado de Usuarios
  </h2>
  <%= link_to "Crear Nuevo Usuario",
    new_user_registration_path,
    class: "btn btn-primary" %>
</div>

<div class="card shadow-lg border-0">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-striped table-hover mb-0 align-middle">
        <thead class="table-dark">
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Email</th>
          <th scope="col">Registrado Desde</th>
          <th scope="col" class="text-center">Acciones</th>
        </tr>
        </thead>
        <tbody>
        <% @users.each do |user| %>
          <tr data-user-id="<%= user.id %>">
            <th scope="row"><%= user.id %></th>
            <td>
              <% if user == current_user %>
                <i class="fas fa-user-circle text-info me-1" title="Usuario Actual"></i>
              <% end %>
              <%= user.email %>
            </td>
            <td><%= user.created_at.strftime("%d/%m/%Y") %></td>

            <td class="d-flex flex-row flex-wrap w-100 h-100 gap-3
            justify-content-center">

              <%= link_to "Ver",
                class: "btn btn-sm btn-info me-1" %>

              <%= link_to "Editar",
                edit_admin_user_path(user),
                class: "btn btn-sm btn-warning me-1" %>

              <%= link_to "Eliminar",
                admin_user_path(user.id),
                data: {
                  turbo_method: :delete,
                  turbo_confirm: "¿Estás seguro de que quieres eliminar a
#{user.email} y #{user.id}?",
                },
                class: "btn btn-sm btn-danger #{(can? :delete, User) ?
                  "enabled" : "disabled"}" %>
            </td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<% if @users.empty? %>
  <div class="alert alert-warning mt-4" role="alert">
    No hay usuarios registrados en el sistema.
  </div>
<% end %>

<% end %>